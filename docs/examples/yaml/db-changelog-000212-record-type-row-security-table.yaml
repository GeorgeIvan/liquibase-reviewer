databaseChangeLog:
  - logicalFilePath: db-changelog-000212-record-type-row-security-table.yaml
  - changeSet:
      id: 'tag-pre-000212'
      author: appian
      tagDatabase:
        tag: 'pre-000212'
  - changeSet:
      id: '000212.1.0'
      author: appian
      changes:
        comment: Create record_type_row_security table
        createTable:
          tableName: record_type_row_security
          columns:
            - column:
                name: id
                type: ${longtype}
                autoIncrement: ${autoIncrement}
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: uuid
                type: ${uuidType}
                constraints:
                  nullable: false
            - column:
                name: rt_id
                type: ${longType}
                constraints:
                  nullable: false
            - column:
                name: rls_config
                type: ${largeStringType}
                constraints:
                  nullable: false
  - changeSet:
      id: '000212.2.0'
      author: appian
      changes:
        comment: Add relevant foreign keys
        addForeignKeyConstraint:
          constraintName: rt_row_security_rt_id_fk
          baseTableName: record_type_row_security
          baseColumnNames: rt_id
          referencedTableName: record_type
          referencedColumnNames: id
  - changeSet:
      id: '000212.3.0'
      author: appian
      changes:
        preConditions:
          onFail: MARK_RAN
          changeLogPropertyDefined:
            property: createSequence
            value: true
        createSequence:
          sequenceName: record_type_row_security_sq
